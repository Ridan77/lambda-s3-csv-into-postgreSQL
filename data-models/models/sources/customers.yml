version: 2

sources:
  - name: ingestion
    description: >
      Raw ingestion tables populated from customer-provided CSV files.
      These tables represent the canonical schema for CSV ingestion contracts.
    schema: public
    tables:
      - name: customers
        description: >
          Customer master data provided via customers.csv.
          Each row represents a unique customer.
          Internal identifiers are system-generated and must not be supplied
          by customers. Business keys are used for references.

        columns:
          - name: customer_id
            description: >
              System-generated internal identifier.
              Must not be supplied in customer CSV files.
            tests:
              - not_null
              - unique

          - name: customer_code
            description: >
              Unique business identifier for the customer.
              Used as the reference key by all transactional CSVs.
            tests:
              - not_null
              - unique

          - name: customer_name
            description: >
              Primary customer display name (English).
            tests:
              - not_null

          - name: customer_name_hebrew
            description: >
              Optional Hebrew display name for the customer.

          - name: customer_type
            description: >
              Optional classification of customer (e.g. retailer, distributor).

          - name: contact_name
            description: >
              Primary contact person name.

          - name: contact_name_hebrew
            description: >
              Optional Hebrew contact name.

          - name: email
            description: >
              Contact email address.

          - name: phone
            description: >
              Contact phone number.

          - name: address_city
            description: >
              City portion of the customer's address.

          - name: address_city_hebrew
            description: >
              Hebrew city name.

          - name: address_street
            description: >
              Street portion of the customer's address.

          - name: address_street_hebrew
            description: >
              Hebrew street name.

          - name: payment_terms_days
            description: >
              Number of days allowed for payment.
              Defaults to 30 if not supplied.

          - name: credit_limit
            description: >
              Maximum allowed credit for the customer.

          - name: priority_level
            description: >
              Priority classification for order handling.
              Defaults to 'normal'.

          - name: is_active
            description: >
              Indicates whether the customer is active.
              Defaults to true.

          - name: created_at
            description: >
              Timestamp when the record was created by the system.
              Must NOT be supplied in customers.csv.

          - name: updated_at
            description: >
              Timestamp when the record was last updated by the system.
              Must NOT be supplied in customers.csv.

